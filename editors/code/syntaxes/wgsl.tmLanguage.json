{
	"name": "WGSL",
	"scopeName": "source.wgsl",
	"patterns": [
		{ "include": "#line_ending_comments" },
		{ "include": "#block_comments" },
		{ "include": "#functions" },
		{ "include": "#keywords" },
		{ "include": "#function_calls" },
		{ "include": "#literals" },
		{ "include": "#types" },
		{ "include": "#variables" },
		{ "include": "#punctuation" },
		{ "include": "#reserved_words" },
		{ "include": "#address_spaces" },
		{ "include": "#memory_access_modes" },
		{ "include": "#attribute_names" },
		{ "include": "#operators" },
		{ "include": "#built-in_value_names" },
		{ "include": "#global_directives" }
	],
	"repository": {
		"line_ending_comments": {
			"comment": "single line comment",
			"name": "comment.line.double-slash.wgsl",
			"match": "\\s*//.*"
		},
		"block_comments": {
			"comment": "Block comment",
			"name": "comment.block.wgsl",
			"begin": "/\\*",
			"end": "\\*/",
			"patterns": [ { "include": "#block_comments" } ]
		},
		"functions": {
			"patterns": [
				{
					"comment": "function definition",
					"name": "meta.function.definition.wgsl",
					"begin": "\\b(fn)\\s+([_$[:alpha:]][_$[:alnum:]]*)\\s*((\\()|(<))",
					"beginCaptures": {
						"1": { "name": "keyword.fn.wgsl" },
						"2": { "name": "entity.name.function.definition.wgsl" },
						"4": { "name": "punctuation.brackets.round.wgsl" }
					},
					"end": "\\{",
					"endCaptures": { "0": { "name": "punctuation.brackets.curly.wgsl" } },
					"patterns": [
						{ "include": "#line_ending_comments" },
						{ "include": "#keywords" },
						{ "include": "#function_calls" },
						{ "include": "#literals" },
						{ "include": "#types" },
						{ "include": "#variables" },
						{ "include": "#punctuation" }
					]
				}
			]
		},
		"function_calls": {
			"patterns": [
				{
					"comment": "function/method calls",
					"name": "meta.function.wgsl",
					"begin": "([_$[:alpha:]][_$[:alnum:]]*)\\s*((\\()|(<))",
					"beginCaptures": {
						"1": { "name": "entity.name.function.wgsl" },
						"2": { "name": "punctuation.brackets.round.wgsl" }
					},
					"end": "\\)",
					"endCaptures": { "0": { "name": "punctuation.brackets.round.wgsl" } },
					"patterns": [
						{ "include": "#line_ending_comments" },
						{ "include": "#keywords" },
						{ "include": "#function_calls" },
						{ "include": "#literals" },
						{ "include": "#types" },
						{ "include": "#variables" },
						{ "include": "#punctuation" }
					]
				}
			]
		},
		"literals": {
			"patterns": [
				{
					"comment": "decimal_int_literal: https://www.w3.org/TR/WGSL/#syntax-decimal_int_literal",
					"name": "constant.numeric.decimal.int.wgsl",
					"match": "\\b(0[iu]?|[1-9][0-9]*[iu]?)\\b"
				},
				{
					"comment": "hex_int_literal: https://www.w3.org/TR/WGSL/#syntax-hex_int_literal",
					"name": "constant.numeric.hex.int.wgsl",
					"match": "\\b(0[xX][0-9a-fA-F]+[iu]?)\\b"
				},
				{
					"comment": "decimal_float_literal: https://www.w3.org/TR/WGSL/#syntax-decimal_float_literal",
					"name": "constant.numeric.decimal.float.wgsl",
					"match": "\\b(0[fh]|[1-9][0-9]*[fh]|[0-9]*\\.[0-9]+([eE][+-]?[0-9]+)?[fh]?|[0-9]+\\.[0-9]*([eE][+-]?[0-9]+)?[fh]?|[0-9]+[eE][+-]?[0-9]+[fh]?)\\b"
				},
				{
					"comment": "hex_float_literal: https://www.w3.org/TR/WGSL/#syntax-hex_float_literal",
					"name": "constant.numeric.hex.float.wgsl",
					"match": "\\b(0[xX][0-9a-fA-F]*\\.[0-9a-fA-F]+([pP][+-]?[0-9]+[fh]?)?|0[xX][0-9a-fA-F]+\\.[0-9a-fA-F]*([pP][+-]?[0-9]+[fh]?)?|0[xX][0-9a-fA-F]+[pP][+-]?[0-9]+[fh]?)\\b"
				},
				{
					"comment": "bool_literal: https://www.w3.org/TR/WGSL/#syntax-bool_literal",
					"name": "constant.language.boolean.wgsl",
					"match": "\\b(true|false)\\b"
				}
			]
		},
		"types": {
			"comment": "types: https://www.w3.org/TR/WGSL/#types",
			"patterns": [
				{
					"comment": "Boolean Type",
					"name": "storage.type.scalar.wgsl",
					"match": "\\b(true|false)\\b"
				},
				{
					"comment": "scalar Types",
					"name": "storage.type.scalar.wgsl",
					"match": "\\b(bool|i32|u32|f32|f16)\\b"
				},
				{
					"comment": "naga extension types",
					"name": "storage.type.wgsl",
					"match": "\\b(i64|u64|f64)\\b"
				},
				{
					"comment": "vector/matrix types",
					"name": "storage.type.wgsl",
					"match": "\\b(vec[2-4]|mat[2-4]x[2-4])\\b"
				},
				{
					"comment": "atomic types",
					"name": "storage.type.wgsl",
					"match": "\\b(atomic)\\b"
				},
				{
					"comment": "array types",
					"name": "storage.type.wgsl",
					"match": "\\b(array)\\b"
				},
				{
					"comment": "Custom type",
					"name": "entity.name.type.wgsl",
					"match": "\\b([A-Z][A-Za-z0-9]*)\\b"
				}
			]
		},
		"variables": {
			"patterns": [
				{
					"comment": "variables",
					"name": "variable.other.wgsl",
					"match": "\\b(?<!(?<!\\.)\\.)(?:r#(?!(crate|[Ss]elf|super)))?[a-z0-9_]+\\b"
				}
			]
		},
		"punctuation": {
			"patterns": [
				{
					"comment": "comma",
					"name": "punctuation.comma.wgsl",
					"match": ","
				},
				{
					"comment": "curly braces",
					"name": "punctuation.brackets.curly.wgsl",
					"match": "[{}]"
				},
				{
					"comment": "parentheses, round brackets",
					"name": "punctuation.brackets.round.wgsl",
					"match": "[()]"
				},
				{
					"comment": "semicolon",
					"name": "punctuation.semi.wgsl",
					"match": ";"
				},
				{
					"comment": "square brackets",
					"name": "punctuation.brackets.square.wgsl",
					"match": "[\\[\\]]"
				},
				{
					"comment": "angle brackets",
					"name": "punctuation.brackets.angle.wgsl",
					"match": "(?<!=)[<>]"
				}
			]
		},
		"keywords": {
			"comment": "https://www.w3.org/TR/WGSL/#keyword-summary",
			"patterns": [
				{
					"comment": "alias: https://www.w3.org/TR/WGSL/#syntax_kw-alias",
					"name": "keyword.alias.wgsl",
					"match": "\\b(alias)\\b"
				},
				{
					"comment": "break: https://www.w3.org/TR/WGSL/#syntax_kw-break",
					"name": "keyword.control.break.wgsl",
					"match": "\\b(break)\\b"
				},
				{
					"comment": "case: https://www.w3.org/TR/WGSL/#syntax_kw-case",
					"name": "keyword.control.case.wgsl",
					"match": "\\b(case)\\b"
				},
				{
					"comment": "const: https://www.w3.org/TR/WGSL/#syntax_kw-const",
					"name": "keyword.const.wgsl",
					"match": "\\b(const)\\b"
				},
				{
					"comment": "const_assert: https://www.w3.org/TR/WGSL/#syntax_kw-const_assert",
					"name": "keyword.const_assert.wgsl",
					"match": "\\b(const_assert)\\b"
				},
				{
					"comment": "continue: https://www.w3.org/TR/WGSL/#syntax_kw-continue",
					"name": "keyword.control.continue.wgsl",
					"match": "\\b(continue)\\b"
				},
				{
					"comment": "continuing: https://www.w3.org/TR/WGSL/#syntax_kw-continuing",
					"name": "keyword.control.continuing.wgsl",
					"match": "\\b(continuing)\\b"
				},
				{
					"comment": "default: https://www.w3.org/TR/WGSL/#syntax_kw-default",
					"name": "keyword.control.default.wgsl",
					"match": "\\b(default)\\b"
				},
				{
					"comment": "diagnostic: https://www.w3.org/TR/WGSL/#syntax_kw-diagnostic",
					"name": "keyword.diagnostic.wgsl",
					"match": "\\b(diagnostic)\\b"
				},
				{
					"comment": "discard: https://www.w3.org/TR/WGSL/#syntax_kw-discard",
					"name": "keyword.discard.wgsl",
					"match": "\\b(discard)\\b"
				},
				{
					"comment": "else: https://www.w3.org/TR/WGSL/#syntax_kw-else",
					"name": "keyword.control.else.wgsl",
					"match": "\\b(else)\\b"
				},
				{
					"comment": "enable: https://www.w3.org/TR/WGSL/#syntax_kw-enable",
					"name": "keyword.enable.wgsl",
					"match": "\\b(enable)\\b"
				},
				{
					"comment": "false: https://www.w3.org/TR/WGSL/#syntax_kw-false",
					"name": "constant.language.false.wgsl",
					"match": "\\b(false)\\b"
				},
				{
					"comment": "fn: https://www.w3.org/TR/WGSL/#syntax_kw-fn",
					"name": "keyword.fn.wgsl",
					"match": "\\b(fn)\\b"
				},
				{
					"comment": "for: https://www.w3.org/TR/WGSL/#syntax_kw-for",
					"name": "keyword.for.wgsl",
					"match": "\\b(for)\\b"
				},
				{
					"comment": "if: https://www.w3.org/TR/WGSL/#syntax_kw-if",
					"name": "keyword.if.wgsl",
					"match": "\\b(if)\\b"
				},
				{
					"comment": "let: https://www.w3.org/TR/WGSL/#syntax_kw-let",
					"name": "keyword.let.wgsl",
					"match": "\\b(let)\\b"
				},
				{
					"comment": "loop: https://www.w3.org/TR/WGSL/#syntax_kw-loop",
					"name": "keyword.loop.wgsl",
					"match": "\\b(loop)\\b"
				},
				{
					"comment": "override: https://www.w3.org/TR/WGSL/#syntax_kw-override",
					"name": "keyword.override.wgsl",
					"match": "\\b(override)\\b"
				},
				{
					"comment": "requires: https://www.w3.org/TR/WGSL/#syntax_kw-requires",
					"name": "keyword.requires.wgsl",
					"match": "\\b(requires)\\b"
				},
				{
					"comment": "return: https://www.w3.org/TR/WGSL/#syntax_kw-return",
					"name": "keyword.control.return.wgsl",
					"match": "\\b(return)\\b"
				},
				{
					"comment": "struct: https://www.w3.org/TR/WGSL/#syntax_kw-struct",
					"name": "storage.type.struct.wgsl",
					"match": "\\b(struct)\\b"
				},
				{
					"comment": "switch: https://www.w3.org/TR/WGSL/#syntax_kw-switch",
					"name": "keyword.control.switch.wgsl",
					"match": "\\b(switch)\\b"
				},
				{
					"comment": "true: https://www.w3.org/TR/WGSL/#syntax_kw-true",
					"name": "constant.language.true.wgsl",
					"match": "\\b(true)\\b"
				},
				{
					"comment": "var: https://www.w3.org/TR/WGSL/#syntax_kw-var",
					"name": "storage.type.var.wgsl",
					"match": "\\b(var)\\b"
				},
				{
					"comment": "while: https://www.w3.org/TR/WGSL/#syntax_kw-while",
					"name": "keyword.control.while.wgsl",
					"match": "\\b(while)\\b"
				}
			]
		},
		"global_directives": {
			"patterns": [
				{ "include": "#diagnostic_directive" },
				{ "include": "#enable_directive" },
				{ "include": "#requires_directive" }
			]
		},
		"diagnostic_directive": {
			"begin": "\\b(diagnostic)\\b\\s*\\(",
			"beginCaptures": {
				"1": { "name": "keyword.control.wgsl" },
				"0": { "name": "punctuation.section.directive.begin.wgsl" }
			},
			"end": "\\)",
			"endCaptures": { "0": { "name": "punctuation.section.directive.end.wgsl" } },
			"name": "meta.directive.diagnostic.wgsl",
			"patterns": [
				{
					"match": "\\b(error|warning|info|off)\\b",
					"name": "support.constant.wgsl"
				},
				{
					"match": "\\b(derivative_uniformity|subgroup_uniformity)\\b",
					"name": "support.constant.wgsl"
				},
				{
					"match": ",",
					"name": "punctuation.separator.comma.wgsl"
				},
				{
					"match": "\\s+",
					"name": "text.whitespace.wgsl"
				}
			]
		},
		"enable_directive": {
			"name": "keyword.control.enable.wgsl",
			"begin": "\\benable\\b",
			"beginCaptures": { "0": { "name": "keyword.control.enable.wgsl" } },
			"end": ";",
			"endCaptures": { "0": { "name": "punctuation.terminator.statement.wgsl" } },
			"patterns": [
				{
					"match": "\\b(f16|clip_distances|dual_source_blending|subgroups)\\b",
					"name": "support.extension.enable.wgsl"
				},
				{
					"match": ",",
					"name": "punctuation.separator.comma.wgsl"
				}
			]
		},
		"requires_directive": {
			"name": "keyword.control.requires.wgsl",
			"begin": "\\brequires\\b",
			"beginCaptures": { "0": { "name": "keyword.control.requires.wgsl" } },
			"end": ";",
			"endCaptures": { "0": { "name": "punctuation.terminator.statement.wgsl" } },
			"patterns": [
				{
					"match": "\\b(readonly_and_readwrite_storage_textures|packed_4x8_integer_dot_product|unrestricted_pointer_parameters|pointer_composite_access)\\b",
					"name": "support.extension.software.wgsl"
				},
				{
					"match": ",",
					"name": "punctuation.separator.comma.wgsl"
				}
			]
		},
		"operators": {
			"patterns": [
				{
					"comment": "logical operators",
					"name": "keyword.operator.logical.wgsl",
					"match": "(\\^|\\||\\|\\||&&|<<|>>|!)(?!=)"
				},
				{
					"comment": "logical AND, borrow references",
					"name": "keyword.operator.borrow.and.wgsl",
					"match": "&(?![&=])"
				},
				{
					"comment": "assignment operators",
					"name": "keyword.operator.assignment.wgsl",
					"match": "(\\+=|-=|\\*=|/=|%=|\\^=|&=|\\|=|<<=|>>=)"
				},
				{
					"comment": "single equal",
					"name": "keyword.operator.assignment.equal.wgsl",
					"match": "(?<![<>])=(?!=|>)"
				},
				{
					"comment": "comparison operators",
					"name": "keyword.operator.comparison.wgsl",
					"match": "(=(=)?(?!>)|!=|<=|(?<!=)>=)"
				},
				{
					"comment": "math operators",
					"name": "keyword.operator.math.wgsl",
					"match": "(([+%]|(\\*(?!\\w)))(?!=))|(-(?!>))|(/(?!/))"
				},
				{
					"comment": "dot access",
					"name": "keyword.operator.access.dot.wgsl",
					"match": "\\.(?!\\.)"
				},
				{
					"comment": "dashrocket, skinny arrow",
					"name": "keyword.operator.arrow.skinny.wgsl",
					"match": "->"
				}
			]
		},
		"reserved_words": {
			"comment": "https://www.w3.org/TR/WGSL/#reserved-words",
			"name": "keyword.other.reserved_words.wgsl",
			"match": "\\b(aNULL|Self|abstract|active|alignas|alignof|as|asm|asm_fragment|async|attribute|auto|await|become|cast|catch|class|co_await|co_return|co_yield|coherent|column_major|common|compile|compile_fragment|concept|const_cast|consteval|constexpr|constinit|crate|debugger|decltype|delete|demote|demote_to_helper|do|dynamic_cast|enum|explicit|export|extends|extern|external|fallthrough|filter|final|finally|friend|from|fxgroup|get|goto|groupshared|highp|impl|implements|import|inline|instanceof|interface|layout|lowp|macro|macro_rules|match|mediump|meta|mod|module|move|mut|mutable|namespace|new|nil|noexcept|noinline|nointerpolation|non_coherent|noncoherent|noperspective|null|nullptr|of|operator|package|packoffset|partition|pass|patch|pixelfragment|precise|precision|premerge|priv|protected|pub|public|readonly|ref|regardless|register|reinterpret_cast|require|resource|restrict|self|set|shared|sizeof|smooth|snorm|static|static_assert|static_cast|std|subroutine|super|target|template|this|thread_local|throw|trait|try|type|typedef|typeid|typename|typeof|union|unless|unorm|unsafe|unsized|use|using|varying|virtual|volatile|wgsl|where|with|writeonly|yield)\\b"
		},
		"address_spaces": {
			"comment": "https://www.w3.org/TR/WGSL/#address-spaces",
			"name": "storage.modifier.address_spaces.wgsl",
			"match": "\\b(function|private|workgroup|uniform|storage|handle)\\b"
		},
		"memory_access_modes": {
			"comment": "https://www.w3.org/TR/WGSL/#memory-access-mode",
			"name": "storage.modifier.memory_access_modes.wgsl",
			"match": "\\b(read|write|read_write)\\b"
		},
		"attribute_names": {
			"comment": "https://www.w3.org/TR/WGSL/#attribute-names",
			"patterns": [
				{
					"name": "entity.other.attribute-name.align.wgsl",
					"match": "\\b(align)\\b"
				},
				{
					"name": "entity.other.attribute-name.binding.wgsl",
					"match": "\\b(binding)\\b"
				},
				{
					"name": "entity.other.attribute-name.builtin.wgsl",
					"match": "\\b(builtin)\\b"
				},
				{
					"name": "entity.other.attribute-name.compute.wgsl",
					"match": "\\b(compute)\\b"
				},
				{
					"name": "entity.other.attribute-name.const.wgsl",
					"match": "\\b(const)\\b"
				},
				{
					"name": "entity.other.attribute-name.diagnostic.wgsl",
					"match": "\\b(diagnostic)\\b"
				},
				{
					"name": "entity.other.attribute-name.fragment.wgsl",
					"match": "\\b(fragment)\\b"
				},
				{
					"name": "entity.other.attribute-name.group.wgsl",
					"match": "\\b(group)\\b"
				},
				{
					"name": "entity.other.attribute-name.id.wgsl",
					"match": "\\b(id)\\b"
				},
				{
					"name": "entity.other.attribute-name.interpolate.wgsl",
					"match": "\\b(interpolate)\\b"
				},
				{
					"name": "entity.other.attribute-name.invariant.wgsl",
					"match": "\\b(invariant)\\b"
				},
				{
					"name": "entity.other.attribute-name.location.wgsl",
					"match": "\\b(location)\\b"
				},
				{
					"name": "entity.other.attribute-name.blend_src.wgsl",
					"match": "\\b(blend_src)\\b"
				},
				{
					"name": "entity.other.attribute-name.must_use.wgsl",
					"match": "\\b(must_use)\\b"
				},
				{
					"name": "entity.other.attribute-name.size.wgsl",
					"match": "\\b(size)\\b"
				},
				{
					"name": "entity.other.attribute-name.vertex.wgsl",
					"match": "\\b(vertex)\\b"
				},
				{
					"name": "entity.other.attribute-name.workgroup_size.wgsl",
					"match": "\\b(workgroup_size)\\b"
				}
			]
		},
		"built-in_value_names": {
			"patterns": [
				{
					"comment": "vertex_index: https://www.w3.org/TR/WGSL/#built-in-values-vertex_index",
					"name": "built-in_value_name.vertex_index.wgsl",
					"match": "\\b(vertex_index)\\b"
				},
				{
					"comment": "instance_index: https://www.w3.org/TR/WGSL/#built-in-values-instance_index",
					"name": "built-in_value_name.instance_index.wgsl",
					"match": "\\b(instance_index)\\b"
				},
				{
					"comment": "position: https://www.w3.org/TR/WGSL/#built-in-values-position",
					"name": "built-in_value_name.position.wgsl",
					"match": "\\b(position)\\b"
				},
				{
					"comment": "front_facing: https://www.w3.org/TR/WGSL/#built-in-values-front_facing",
					"name": "built-in_value_name.front_facing.wgsl",
					"match": "\\b(front_facing)\\b"
				},
				{
					"comment": "frag_depth: https://www.w3.org/TR/WGSL/#built-in-values-frag_depth",
					"name": "built-in_value_name.frag_depth.wgsl",
					"match": "\\b(frag_depth)\\b"
				},
				{
					"comment": "sample_index: https://www.w3.org/TR/WGSL/#built-in-values-sample_index",
					"name": "built-in_value_name.sample_index.wgsl",
					"match": "\\b(sample_index)\\b"
				},
				{
					"comment": "sample_mask: https://www.w3.org/TR/WGSL/#built-in-values-sample_mask",
					"name": "built-in_value_name.sample_mask.wgsl",
					"match": "\\b(sample_mask)\\b"
				},
				{
					"comment": "local_invocation_id: https://www.w3.org/TR/WGSL/#built-in-values-local_invocation_id",
					"name": "built-in_value_name.local_invocation_id.wgsl",
					"match": "\\b(local_invocation_id)\\b"
				},
				{
					"comment": "local_invocation_index: https://www.w3.org/TR/WGSL/#built-in-values-local_invocation_index",
					"name": "built-in_value_name.local_invocation_index.wgsl",
					"match": "\\b(local_invocation_index)\\b"
				},
				{
					"comment": "global_invocation_id: https://www.w3.org/TR/WGSL/#built-in-values-global_invocation_id",
					"name": "built-in_value_name.global_invocation_id.wgsl",
					"match": "\\b(global_invocation_id)\\b"
				},
				{
					"comment": "workgroup_id: https://www.w3.org/TR/WGSL/#built-in-values-workgroup_id",
					"name": "built-in_value_name.workgroup_id.wgsl",
					"match": "\\b(workgroup_id)\\b"
				},
				{
					"comment": "num_workgroups: https://www.w3.org/TR/WGSL/#built-in-values-num_workgroups",
					"name": "built-in_value_name.num_workgroups.wgsl",
					"match": "\\b(num_workgroups)\\b"
				},
				{
					"comment": "subgroup_invocation_id: https://www.w3.org/TR/WGSL/#built-in-values-subgroup_invocation_id",
					"name": "built-in_value_name.subgroup_invocation_id.wgsl",
					"match": "\\b(subgroup_invocation_id)\\b"
				},
				{
					"comment": "subgroup_size: https://www.w3.org/TR/WGSL/#built-in-values-subgroup_size",
					"name": "built-in_value_name.subgroup_size.wgsl",
					"match": "\\b(subgroup_size)\\b"
				}
			]
		}
	}
}
